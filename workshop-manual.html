<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Liberation Sprint Interactive Playbook</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
					Helvetica, Arial, sans-serif;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: #fff;
				overflow-x: hidden;
			}

			.app-container {
				display: flex;
				height: 100vh;
			}

			.sidebar {
				width: 300px;
				background: rgba(17, 24, 39, 0.95);
				backdrop-filter: blur(20px);
				border-right: 1px solid rgba(255, 255, 255, 0.1);
				overflow-y: auto;
				transition: transform 0.3s ease;
				z-index: 100;
			}

			.sidebar.mobile-hidden {
				transform: translateX(-100%);
			}

			.sidebar-header {
				padding: 1.5rem;
				border-bottom: 1px solid rgba(255, 255, 255, 0.1);
			}

			.sidebar-header h1 {
				font-size: 1.25rem;
				font-weight: 600;
				margin-bottom: 0.5rem;
				background: linear-gradient(135deg, #fbbf24, #f59e0b);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
			}

			.sidebar-header p {
				font-size: 0.875rem;
				color: #d1d5db;
			}

			.workshop-phases {
				padding: 1rem;
			}

			.phase-item {
				margin-bottom: 0.5rem;
				border-radius: 0.5rem;
				overflow: hidden;
				border: 1px solid rgba(255, 255, 255, 0.1);
			}

			.phase-header {
				padding: 1rem;
				background: rgba(255, 255, 255, 0.05);
				cursor: pointer;
				display: flex;
				justify-content: space-between;
				align-items: center;
				transition: background 0.2s;
			}

			.phase-header:hover {
				background: rgba(255, 255, 255, 0.1);
			}

			.phase-header.active {
				background: rgba(59, 130, 246, 0.3);
			}

			.phase-title {
				font-weight: 500;
				font-size: 0.875rem;
			}

			.phase-time {
				font-size: 0.75rem;
				color: #9ca3af;
			}

			.modules {
				background: rgba(0, 0, 0, 0.2);
				display: none;
			}

			.modules.active {
				display: block;
			}

			.module-item {
				padding: 0.75rem 1rem;
				border-bottom: 1px solid rgba(255, 255, 255, 0.05);
				cursor: pointer;
				transition: background 0.2s;
			}

			.module-item:hover {
				background: rgba(255, 255, 255, 0.05);
			}

			.module-item.active {
				background: rgba(34, 197, 94, 0.2);
				border-left: 3px solid #22c55e;
			}

			.main-content {
				flex: 1;
				display: flex;
				flex-direction: column;
				overflow: hidden;
			}

			.top-toolbar {
				height: 60px;
				background: rgba(17, 24, 39, 0.95);
				backdrop-filter: blur(20px);
				border-bottom: 1px solid rgba(255, 255, 255, 0.1);
				display: flex;
				align-items: center;
				padding: 0 1.5rem;
				gap: 1rem;
				flex-wrap: wrap;
			}

			.timer-display {
				background: rgba(59, 130, 246, 0.2);
				padding: 0.5rem 1rem;
				border-radius: 0.5rem;
				font-family: "Courier New", monospace;
				font-weight: bold;
				min-width: 80px;
				text-align: center;
			}

			.timer-controls {
				display: flex;
				gap: 0.5rem;
			}

			.btn {
				background: rgba(255, 255, 255, 0.1);
				border: 1px solid rgba(255, 255, 255, 0.2);
				color: #fff;
				padding: 0.5rem 1rem;
				border-radius: 0.375rem;
				cursor: pointer;
				font-size: 0.875rem;
				transition: background 0.2s;
			}

			.btn:hover {
				background: rgba(255, 255, 255, 0.2);
			}

			.btn.primary {
				background: rgba(59, 130, 246, 0.8);
				border-color: rgba(59, 130, 246, 1);
			}

			.btn.danger {
				background: rgba(239, 68, 68, 0.8);
				border-color: rgba(239, 68, 68, 1);
			}

			.content-area {
				flex: 1;
				display: flex;
				overflow: hidden;
			}

			.content-panel {
				flex: 1;
				padding: 2rem;
				overflow-y: auto;
				background: rgba(255, 255, 255, 0.05);
			}

			.content-section {
				margin-bottom: 2rem;
				animation: fadeIn 0.3s ease;
			}

			@keyframes fadeIn {
				from {
					opacity: 0;
					transform: translateY(10px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			.content-section h1 {
				font-size: 2rem;
				margin-bottom: 1rem;
				color: #fbbf24;
			}

			.content-section h2 {
				font-size: 1.5rem;
				margin-bottom: 1rem;
				color: #fbbf24;
			}

			.content-section h3 {
				font-size: 1.25rem;
				margin-bottom: 0.75rem;
				color: #60a5fa;
			}

			.content-section h4 {
				font-size: 1.1rem;
				margin-bottom: 0.5rem;
				color: #a78bfa;
			}

			.content-section p {
				line-height: 1.6;
				margin-bottom: 1rem;
				color: #e5e7eb;
			}

			.content-section ul {
				margin-left: 2rem;
				margin-bottom: 1rem;
				color: #e5e7eb;
			}

			.content-section li {
				margin-bottom: 0.5rem;
			}

			.materials-checklist {
				background: rgba(0, 0, 0, 0.2);
				padding: 1rem;
				border-radius: 0.5rem;
				margin-bottom: 1rem;
			}

			.checklist-item {
				display: flex;
				align-items: center;
				margin-bottom: 0.5rem;
				cursor: pointer;
			}

			.checklist-item input[type="checkbox"] {
				margin-right: 0.75rem;
				transform: scale(1.2);
				cursor: pointer;
			}

			.checklist-item label {
				cursor: pointer;
				flex: 1;
			}

			.energy-meter {
				background: rgba(0, 0, 0, 0.2);
				padding: 1rem;
				border-radius: 0.5rem;
				margin-bottom: 1rem;
			}

			.energy-bar {
				width: 100%;
				height: 8px;
				background: rgba(255, 255, 255, 0.1);
				border-radius: 4px;
				overflow: hidden;
			}

			.energy-fill {
				height: 100%;
				background: linear-gradient(90deg, #ef4444, #f59e0b, #22c55e);
				transition: width 0.3s ease;
			}

			.notes-section {
				background: rgba(0, 0, 0, 0.2);
				padding: 1rem;
				border-radius: 0.5rem;
				margin-top: 1rem;
			}

			.notes-textarea {
				width: 100%;
				height: 100px;
				background: rgba(255, 255, 255, 0.05);
				border: 1px solid rgba(255, 255, 255, 0.1);
				border-radius: 0.375rem;
				color: #fff;
				padding: 0.75rem;
				font-family: inherit;
				resize: vertical;
			}

			.notes-textarea::placeholder {
				color: rgba(255, 255, 255, 0.5);
			}

			.adaptive-alerts {
				position: fixed;
				top: 80px;
				right: 20px;
				width: 300px;
				z-index: 1000;
			}

			.alert {
				background: rgba(239, 68, 68, 0.9);
				border: 1px solid #ef4444;
				border-radius: 0.5rem;
				padding: 1rem;
				margin-bottom: 0.5rem;
				backdrop-filter: blur(10px);
				transform: translateX(400px);
				animation: slideIn 0.3s ease forwards;
			}

			.alert.warning {
				background: rgba(245, 158, 11, 0.9);
				border-color: #f59e0b;
			}

			.alert.info {
				background: rgba(59, 130, 246, 0.9);
				border-color: #3b82f6;
			}

			.alert.success {
				background: rgba(34, 197, 94, 0.9);
				border-color: #22c55e;
			}

			@keyframes slideIn {
				to {
					transform: translateX(0);
				}
			}

			.progress-indicator {
				height: 4px;
				background: rgba(255, 255, 255, 0.1);
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				z-index: 1001;
			}

			.progress-fill {
				height: 100%;
				background: linear-gradient(90deg, #6366f1, #8b5cf6);
				transition: width 0.3s ease;
				width: 0%;
			}

			.highlight-box {
				background: rgba(245, 158, 11, 0.2);
				padding: 1rem;
				border-radius: 0.5rem;
				border-left: 4px solid #f59e0b;
				margin: 1rem 0;
			}

			.mobile-overlay {
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: rgba(0, 0, 0, 0.5);
				z-index: 99;
			}

			.mobile-overlay.active {
				display: block;
			}

			@media (max-width: 1024px) {
				.sidebar {
					position: fixed;
					z-index: 101;
					height: 100vh;
				}

				.top-toolbar {
					padding: 0 1rem;
				}

				.content-panel {
					padding: 1rem;
				}
			}

			@media (max-width: 640px) {
				.timer-controls {
					flex-wrap: wrap;
				}

				.btn {
					padding: 0.375rem 0.75rem;
					font-size: 0.75rem;
				}

				.content-section h1 {
					font-size: 1.5rem;
				}

				.content-section h2 {
					font-size: 1.25rem;
				}
			}
		</style>
	</head>
	<body>
		<div class="progress-indicator">
			<div class="progress-fill" id="progressFill"></div>
		</div>

		<div
			class="mobile-overlay"
			id="mobileOverlay"
			onclick="closeMobileMenus()"
		></div>

		<div class="app-container">
			<nav class="sidebar" id="sidebar">
				<div class="sidebar-header">
					<h1>Liberation Sprint</h1>
					<p>Interactive Facilitator's Playbook</p>
				</div>

				<div class="workshop-phases">
					<div class="phase-item">
						<div
							class="phase-header active"
							onclick="togglePhase('preparation')"
						>
							<span class="phase-title">Pre-Workshop Setup</span>
							<span class="phase-time">30min</span>
						</div>
						<div class="modules active" id="preparation">
							<div
								class="module-item active"
								onclick="selectModule('room-setup')"
							>
								Room Configuration
							</div>
							<div class="module-item" onclick="selectModule('materials')">
								Materials Check
							</div>
							<div class="module-item" onclick="selectModule('mindset')">
								Facilitator Mindset
							</div>
						</div>
					</div>

					<div class="phase-item">
						<div class="phase-header" onclick="togglePhase('core')">
							<span class="phase-title">Core Workshop</span>
							<span class="phase-time">150min</span>
						</div>
						<div class="modules" id="core">
							<div class="module-item" onclick="selectModule('spectrum')">
								Opening Spectrum (15min)
							</div>
							<div class="module-item" onclick="selectModule('marketplace')">
								Problem Marketplace (20min)
							</div>
							<div class="module-item" onclick="selectModule('context')">
								Context Revolution (45min)
							</div>
							<div class="module-item" onclick="selectModule('sprint')">
								Solution Sprint (30min)
							</div>
							<div class="module-item" onclick="selectModule('ceremony')">
								Commitment Ceremony (20min)
							</div>
						</div>
					</div>

					<div class="phase-item">
						<div class="phase-header" onclick="togglePhase('adaptive')">
							<span class="phase-title">Adaptive Responses</span>
							<span class="phase-time">As Needed</span>
						</div>
						<div class="modules" id="adaptive">
							<div class="module-item" onclick="selectModule('no-it')">
								IT Absent
							</div>
							<div class="module-item" onclick="selectModule('skeptics')">
								Heavy Skepticism
							</div>
							<div class="module-item" onclick="selectModule('energy-crash')">
								Energy Management
							</div>
							<div class="module-item" onclick="selectModule('expert')">
								Unexpected Expertise
							</div>
						</div>
					</div>
				</div>
			</nav>

			<main class="main-content">
				<div class="top-toolbar">
					<button class="btn" onclick="toggleSidebar()">☰ Menu</button>
					<div class="timer-display" id="timerDisplay">00:00</div>
					<div class="timer-controls">
						<button
							class="btn primary"
							id="timerStartBtn"
							onclick="startTimer()"
						>
							Start
						</button>
						<button class="btn" onclick="pauseTimer()">Pause</button>
						<button class="btn danger" onclick="resetTimer()">Reset</button>
					</div>
					<div style="margin-left: auto; display: flex; gap: 0.5rem">
						<button class="btn" onclick="openRoomLayout()">Room Layout</button>
						<button class="btn" onclick="showEnergyAlert()">
							Energy Check
						</button>
					</div>
				</div>

				<div class="content-area">
					<div class="content-panel" id="contentPanel">
						<!-- Content will be loaded here -->
					</div>
				</div>
			</main>
		</div>

		<div class="adaptive-alerts" id="adaptiveAlerts"></div>

		<script>
			// Global variables - properly declared
			let currentPhase = "preparation";
			let currentModule = "room-setup";
			let timer = {
				minutes: 0,
				seconds: 0,
				totalSeconds: 0,
				targetSeconds: 0,
				isRunning: false,
				interval: null,
				countDown: true,
			};
			let workshopProgress = 0;

			// Workshop content database - complete content for all modules
			const workshopContent = {
				"room-setup": {
					title: "Room Configuration Strategy",
					content: `
                    <div class="content-section">
                        <h1>Room Configuration Strategy</h1>
                        
                        <h2>The Marketplace Layout</h2>
                        <p>Position tables in clusters around the room's periphery, leaving the center open for movement. This configuration serves multiple purposes:</p>
                        <ul>
                            <li>Prevents traditional classroom hierarchy</li>
                            <li>Enables quick team formation</li>
                            <li>Allows for physical spectrum exercises</li>
                            <li>Creates productive pressure for focused teams</li>
                        </ul>

                        <h3>Key Setup Elements</h3>
                        <div class="materials-checklist">
                            <h4>Room Configuration Checklist</h4>
                            <div class="checklist-item">
                                <input type="checkbox" id="tables-periphery">
                                <label for="tables-periphery">Tables positioned around periphery (3-4 people each)</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="center-clear">
                                <label for="center-clear">Center space clear for movement</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="liberation-wall">
                                <label for="liberation-wall">Liberation Wall setup (3m wide minimum)</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="commitment-corner">
                                <label for="commitment-corner">Commitment Corner designated</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="facilitator-position">
                                <label for="facilitator-position">Facilitator position marked</label>
                            </div>
                        </div>

                        <div class="highlight-box">
                            <h4>Spatial Psychology</h4>
                            <p>The room setup profoundly influences workshop dynamics. Each zone serves a specific psychological function:</p>
                            <ul>
                                <li><strong>Liberation Wall:</strong> Dominates one wall, creating anticipation and visual focus</li>
                                <li><strong>Commitment Corner:</strong> Separate ceremonial space for final promises</li>
                                <li><strong>Movement Space:</strong> Enables physical engagement and energy management</li>
                                <li><strong>Table Clusters:</strong> Foster collaboration while maintaining team identity</li>
                            </ul>
                        </div>

                        <div class="notes-section">
                            <h4>Setup Notes</h4>
                            <textarea class="notes-textarea" placeholder="Record room-specific adaptations, constraints, or observations..."></textarea>
                        </div>
                    </div>
                `,
					timer: 10,
				},
				materials: {
					title: "Essential Materials Preparation",
					content: `
                    <div class="content-section">
                        <h1>Essential Materials Preparation</h1>
                        
                        <h2>Antifragile Materials Strategy</h2>
                        <p>Prepare both digital and analog versions for maximum flexibility. Assume technology will partially fail at the most inconvenient moment.</p>

                        <div class="materials-checklist">
                            <h4>Problem Marketplace Kit</h4>
                            <div class="checklist-item">
                                <input type="checkbox" id="red-notes">
                                <label for="red-notes">Red sticky notes (100+) - Problems</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="yellow-notes">
                                <label for="yellow-notes">Yellow sticky notes (100+) - Interest</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="green-notes">
                                <label for="green-notes">Green sticky notes (100+) - Solutions</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="wall-space">
                                <label for="wall-space">Wall space (3m wide) or brown paper roll</label>
                            </div>
                        </div>

                        <div class="materials-checklist">
                            <h4>Liberation Wall Setup</h4>
                            <div class="checklist-item">
                                <input type="checkbox" id="large-wall">
                                <label for="large-wall">Largest wall or whiteboard available</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="brown-paper">
                                <label for="brown-paper">Brown paper roll (2m+ wide) as backup</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="painter-tape">
                                <label for="painter-tape">Painter's tape for grid structure</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="markers">
                                <label for="markers">Thick markers (multiple colors)</label>
                            </div>
                        </div>

                        <div class="highlight-box">
                            <h4>Technical Contingency Protocol</h4>
                            <p>When technology fails, immediately reframe: "Perfect! This is exactly why we build human capability, not tool dependency." Have backup stories ready about times when technology failed but human creativity prevailed.</p>
                        </div>

                        <div class="notes-section">
                            <h4>Materials Notes</h4>
                            <textarea class="notes-textarea" placeholder="Track what's been prepared, what's missing, backup plans..."></textarea>
                        </div>
                    </div>
                `,
					timer: 10,
				},
				mindset: {
					title: "Facilitator Mindset Preparation",
					content: `
                    <div class="content-section">
                        <h1>Facilitator Mindset Preparation</h1>
                        
                        <h2>Your Role as Liberation Catalyst</h2>
                        <p>You're not teaching tools - you're awakening capability. Your energy sets the ceiling for what's possible in the room.</p>

                        <h3>Pre-Workshop Mental Preparation</h3>
                        <ul>
                            <li><strong>Confidence Calibration:</strong> You know 10x more than needed. Trust yourself.</li>
                            <li><strong>Skeptic Appreciation:</strong> Skeptics are your best allies - they keep it real.</li>
                            <li><strong>Failure Reframe:</strong> Technical failures are features, not bugs.</li>
                            <li><strong>Energy Management:</strong> Your enthusiasm is contagious - protect it.</li>
                        </ul>

                        <div class="highlight-box">
                            <h4>The Liberation Mindset</h4>
                            <p>Remember: You're freeing people from learned helplessness around technology. Every small win builds momentum toward organizational transformation.</p>
                        </div>

                        <h3>Key Mental Models</h3>
                        <ul>
                            <li><strong>Show, Don't Tell:</strong> One demo beats ten explanations</li>
                            <li><strong>Progress Over Perfection:</strong> Messy action beats elegant inaction</li>
                            <li><strong>Collective Intelligence:</strong> The room knows more than you - facilitate emergence</li>
                            <li><strong>Productive Pressure:</strong> Time constraints create focus and creativity</li>
                        </ul>

                        <div class="energy-meter">
                            <h4>Your Energy Check</h4>
                            <div class="energy-bar">
                                <div class="energy-fill" style="width: 90%;"></div>
                            </div>
                            <p style="margin-top: 0.5rem; font-size: 0.875rem;">Remember: Your energy is the workshop's fuel</p>
                        </div>

                        <div class="notes-section">
                            <h4>Personal Preparation Notes</h4>
                            <textarea class="notes-textarea" placeholder="What's your intention for this workshop? What specific outcomes do you want?"></textarea>
                        </div>
                    </div>
                `,
					timer: 10,
				},
				spectrum: {
					title: "The Opening Spectrum (15 minutes)",
					content: `
                    <div class="content-section">
                        <h1>The Opening Spectrum (15 minutes)</h1>
                        
                        <h2>Making Invisible Dynamics Visible</h2>
                        <p>This powerful opening immediately reveals group composition and creates psychological safety for honest participation.</p>

                        <h3>The Two-Spectrum Technique</h3>
                        <p><strong>First Spectrum - Technical Relationship:</strong></p>
                        <ul>
                            <li>"If you build or configure technology daily" → One wall</li>
                            <li>"If you wish technology just worked without thinking" → Opposite wall</li>
                            <li>Everyone else finds their position between</li>
                        </ul>

                        <p><strong>Second Spectrum - Motivation:</strong></p>
                        <ul>
                            <li>"I'm here because I absolutely want to be" → One wall</li>
                            <li>"I'm here because someone told me to be" → Opposite wall</li>
                        </ul>

                        <div class="highlight-box">
                            <h4>Facilitation Keys</h4>
                            <ul>
                                <li>Watch movement patterns - decisive vs hesitant</li>
                                <li>Thank people for honesty, especially skeptics</li>
                                <li>Make group composition explicit</li>
                                <li>Assign roles based on quadrants</li>
                            </ul>
                        </div>

                        <h3>Reading the Room</h3>
                        <p>The intersection creates four quadrants:</p>
                        <ul>
                            <li><strong>Technical Enthusiasts:</strong> Your pioneers</li>
                            <li><strong>Non-technical Enthusiasts:</strong> Your evangelists</li>
                            <li><strong>Technical Skeptics:</strong> Your quality controllers</li>
                            <li><strong>Non-technical Skeptics:</strong> Your reality checkers</li>
                        </ul>

                        <div class="energy-meter">
                            <h4>Expected Energy Level</h4>
                            <div class="energy-bar">
                                <div class="energy-fill" style="width: 70%;"></div>
                            </div>
                            <p style="margin-top: 0.5rem; font-size: 0.875rem;">Moderate to high - movement creates engagement</p>
                        </div>

                        <div class="notes-section">
                            <h4>Observation Notes</h4>
                            <textarea class="notes-textarea" placeholder="Note group dynamics, energy, and surprising positions..."></textarea>
                        </div>
                    </div>
                `,
					timer: 15,
				},
				marketplace: {
					title: "Problem Marketplace (20 minutes)",
					content: `
                    <div class="content-section">
                        <h1>Problem Marketplace (20 minutes)</h1>
                        
                        <h2>Surfacing Real Pain Points</h2>
                        <p>Transform complaints into opportunities. The marketplace makes problems visible and actionable.</p>

                        <h3>The Process</h3>
                        <ul>
                            <li><strong>5 min:</strong> Silent problem generation (red sticky notes)</li>
                            <li><strong>5 min:</strong> Clustering on the wall by theme</li>
                            <li><strong>5 min:</strong> Dot voting for priority (yellow dots)</li>
                            <li><strong>5 min:</strong> Team formation around top problems</li>
                        </ul>

                        <div class="highlight-box">
                            <h4>Common Problem Clusters</h4>
                            <ul>
                                <li>Data scattered across multiple systems</li>
                                <li>Manual repetitive processes</li>
                                <li>Waiting for IT to build solutions</li>
                                <li>Excel reaching its limits</li>
                                <li>Communication breakdowns between teams</li>
                            </ul>
                        </div>

                        <h3>Facilitator Interventions</h3>
                        <ul>
                            <li><strong>If problems are too vague:</strong> "Make it specific - what happened last week?"</li>
                            <li><strong>If too technical:</strong> "What business impact does this have?"</li>
                            <li><strong>If energy drops:</strong> "Who's losing sleep over their problem?"</li>
                        </ul>

                        <div class="materials-checklist">
                            <h4>Quick Check</h4>
                            <div class="checklist-item">
                                <input type="checkbox" id="mp-wall-ready">
                                <label for="mp-wall-ready">Wall space cleared and ready</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="mp-notes-distributed">
                                <label for="mp-notes-distributed">Red sticky notes distributed</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="mp-dots-ready">
                                <label for="mp-dots-ready">Yellow dots for voting ready</label>
                            </div>
                        </div>

                        <div class="notes-section">
                            <h4>Marketplace Observations</h4>
                            <textarea class="notes-textarea" placeholder="What problems emerged? Which got the most energy? Any surprises?"></textarea>
                        </div>
                    </div>
                `,
					timer: 20,
				},
				context: {
					title: "Context Revolution (45 minutes)",
					content: `
                    <div class="content-section">
                        <h1>Context Revolution (45 minutes)</h1>
                        
                        <h2>The Heart of Liberation</h2>
                        <p>This is where transformation happens. Teams engineer context that makes AI actually useful for their specific problems.</p>

                        <h3>The Context Engineering Process</h3>
                        <ul>
                            <li><strong>10 min:</strong> Context buffet introduction</li>
                            <li><strong>25 min:</strong> Teams build their contexts</li>
                            <li><strong>10 min:</strong> Lightning presentations</li>
                        </ul>

                        <div class="highlight-box">
                            <h4>Context Building Blocks</h4>
                            <ul>
                                <li><strong>Role Definition:</strong> "You are a [specific expert]..."</li>
                                <li><strong>Success Criteria:</strong> "A good solution must..."</li>
                                <li><strong>Constraints:</strong> "You must consider..."</li>
                                <li><strong>Format Requirements:</strong> "Present results as..."</li>
                                <li><strong>Domain Knowledge:</strong> "In our organization..."</li>
                            </ul>
                        </div>

                        <h3>Power Patterns to Share</h3>
                        <ul>
                            <li><strong>The Specialist:</strong> Deep expertise in narrow domain</li>
                            <li><strong>The Critic:</strong> Find flaws and improvements</li>
                            <li><strong>The Translator:</strong> Bridge between technical and business</li>
                            <li><strong>The Process Engineer:</strong> Design workflows and systems</li>
                        </ul>

                        <h3>Live Demo Script</h3>
                        <p><em>"Watch how context transforms generic AI into your personal expert..."</em></p>
                        <ul>
                            <li>Show same question with no context (generic response)</li>
                            <li>Add role context (more focused)</li>
                            <li>Add constraints (highly specific)</li>
                            <li>Add format requirements (exactly what you need)</li>
                        </ul>

                        <div class="energy-meter">
                            <h4>Energy Management</h4>
                            <div class="energy-bar">
                                <div class="energy-fill" style="width: 60%;"></div>
                            </div>
                            <p style="margin-top: 0.5rem; font-size: 0.875rem;">This is the heavy thinking part - expect energy dip</p>
                        </div>

                        <div class="notes-section">
                            <h4>Context Engineering Notes</h4>
                            <textarea class="notes-textarea" placeholder="What contexts did teams create? Any breakthrough moments?"></textarea>
                        </div>
                    </div>
                `,
					timer: 45,
				},
				sprint: {
					title: "Solution Sprint (30 minutes)",
					content: `
                    <div class="content-section">
                        <h1>Solution Sprint (30 minutes)</h1>
                        
                        <h2>From Context to Creation</h2>
                        <p>Teams apply their engineered contexts to generate real solutions. This is where skeptics become believers.</p>

                        <h3>Sprint Structure</h3>
                        <ul>
                            <li><strong>5 min:</strong> Final context refinement</li>
                            <li><strong>15 min:</strong> Solution generation with AI</li>
                            <li><strong>5 min:</strong> Solution documentation</li>
                            <li><strong>5 min:</strong> Prepare 30-second pitch</li>
                        </ul>

                        <div class="highlight-box">
                            <h4>Coach Teams To</h4>
                            <ul>
                                <li>Start with simplest version first</li>
                                <li>Iterate based on AI responses</li>
                                <li>Save successful prompts as templates</li>
                                <li>Document what worked and why</li>
                                <li>Prepare to share one "aha" moment</li>
                            </ul>
                        </div>

                        <h3>Common Breakthroughs</h3>
                        <ul>
                            <li>"It understood our specific compliance requirements!"</li>
                            <li>"This would have taken me days to research"</li>
                            <li>"It's like having our best analyst on demand"</li>
                            <li>"We can actually build this ourselves"</li>
                        </ul>

                        <h3>Intervention Points</h3>
                        <ul>
                            <li><strong>If stuck:</strong> "What would make this 10% better?"</li>
                            <li><strong>If overwhelmed:</strong> "What's the smallest useful piece?"</li>
                            <li><strong>If skeptical:</strong> "What would convince you this works?"</li>
                        </ul>

                        <div class="notes-section">
                            <h4>Sprint Observations</h4>
                            <textarea class="notes-textarea" placeholder="What solutions emerged? Key breakthroughs? Energy shifts?"></textarea>
                        </div>
                    </div>
                `,
					timer: 30,
				},
				ceremony: {
					title: "Commitment Ceremony (20 minutes)",
					content: `
                    <div class="content-section">
                        <h1>Commitment Ceremony (20 minutes)</h1>
                        
                        <h2>From Workshop to Work</h2>
                        <p>Transform enthusiasm into action. Public commitments create accountability and momentum.</p>

                        <h3>Ceremony Flow</h3>
                        <ul>
                            <li><strong>5 min:</strong> Individual commitment writing</li>
                            <li><strong>10 min:</strong> Public declarations (30 sec each)</li>
                            <li><strong>5 min:</strong> Commitment wall creation</li>
                        </ul>

                        <div class="highlight-box">
                            <h4>Commitment Template</h4>
                            <p><em>"By [date], I will [specific action] to solve [problem] using [approach learned today]"</em></p>
                            <ul>
                                <li>Must be specific and measurable</li>
                                <li>Must have a deadline within 30 days</li>
                                <li>Must reference today's learning</li>
                                <li>Must be something they control</li>
                            </ul>
                        </div>

                        <h3>Creating the Commitment Wall</h3>
                        <ul>
                            <li>Each person posts their commitment card</li>
                            <li>Take a group photo with the wall</li>
                            <li>Share photo immediately (creates social pressure)</li>
                            <li>Schedule 30-day follow-up</li>
                        </ul>

                        <h3>Closing Energy Boost</h3>
                        <p><em>"You just proved you don't need permission to innovate. You have everything you need. The only question is: what will you liberate first?"</em></p>

                        <div class="energy-meter">
                            <h4>Closing Energy</h4>
                            <div class="energy-bar">
                                <div class="energy-fill" style="width: 85%;"></div>
                            </div>
                            <p style="margin-top: 0.5rem; font-size: 0.875rem;">Should leave on a high - celebration mode</p>
                        </div>

                        <div class="notes-section">
                            <h4>Commitments Made</h4>
                            <textarea class="notes-textarea" placeholder="Key commitments, follow-up plans, success metrics..."></textarea>
                        </div>
                    </div>
                `,
					timer: 20,
				},
				"no-it": {
					title: "Adaptive Response: IT Absence",
					content: `
                    <div class="content-section">
                        <h1>When IT Doesn't Show Up</h1>
                        
                        <h2>Weaponize the Absence</h2>
                        <p>Transform their absence into rocket fuel for business empowerment.</p>

                        <div class="highlight-box">
                            <h4>Reframe Strategy</h4>
                            <p><em>"I notice we don't have IT representation today. This might be the best thing that could happen - you're about to discover you don't need permission to innovate."</em></p>
                        </div>

                        <h3>Modifications to Make</h3>
                        <ul>
                            <li><strong>Opening Demo:</strong> Emphasize independence over collaboration</li>
                            <li><strong>IT Perspective Panel:</strong> Empty chair labeled "IT Would Say..."</li>
                            <li><strong>Extra Security Focus:</strong> Overly conservative patterns</li>
                            <li><strong>Bridge Builder Roles:</strong> Who will connect with IT later?</li>
                        </ul>

                        <h3>Security Patterns to Emphasize</h3>
                        <div class="materials-checklist">
                            <h4>Safety-First Rules</h4>
                            <div class="checklist-item">
                                <input type="checkbox" id="no-real-data">
                                <label for="no-real-data">"Never process real patient data"</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="public-info">
                                <label for="public-info">"Start with publicly available information only"</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="restrictive">
                                <label for="restrictive">"When in doubt, be more restrictive"</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" id="verify-it">
                                <label for="verify-it">"Verify with IT before system integration"</label>
                            </div>
                        </div>

                        <h3>Bridge Building Exercise</h3>
                        <p>Create "Message to IT" as group exercise - collaborative letter explaining today's work and inviting them to next session.</p>

                        <div class="notes-section">
                            <h4>IT Bridge Notes</h4>
                            <textarea class="notes-textarea" placeholder="Who will be the IT liaisons? What message should we craft?"></textarea>
                        </div>
                    </div>
                `,
				},
				skeptics: {
					title: "Adaptive Response: Heavy Skepticism",
					content: `
                    <div class="content-section">
                        <h1>Managing Heavy Skepticism</h1>
                        
                        <h2>Skeptics as Secret Weapons</h2>
                        <p>Heavy skepticism isn't resistance - it's rigorous thinking. Channel it productively.</p>

                        <div class="highlight-box">
                            <h4>The Aikido Move</h4>
                            <p><em>"I love the skepticism in this room. You're asking exactly the right questions. Let's use that critical thinking to make this bulletproof."</em></p>
                        </div>

                        <h3>Skeptic Conversion Strategy</h3>
                        <ul>
                            <li><strong>Acknowledge explicitly:</strong> "Your skepticism is valuable"</li>
                            <li><strong>Give them power:</strong> Make them quality controllers</li>
                            <li><strong>Start ultra-simple:</strong> Prove competence with trivial tasks first</li>
                            <li><strong>Let them find flaws:</strong> "Help me break this"</li>
                            <li><strong>Celebrate their catches:</strong> "Exactly! That's why we need you"</li>
                        </ul>

                        <h3>Specific Interventions</h3>
                        <ul>
                            <li><strong>"This is just hype"</strong> → "Let's test that hypothesis together"</li>
                            <li><strong>"It won't work here"</strong> → "What would need to change for it to work?"</li>
                            <li><strong>"We tried this before"</strong> → "What's different now? Let's list it"</li>
                            <li><strong>"IT will never allow it"</strong> → "What would IT need to feel safe?"</li>
                        </ul>

                        <h3>The Skeptic Challenge</h3>
                        <p>Create a "Devil's Advocate" team with the strongest skeptics. Their job: Find every possible failure mode. Then solve for each one.</p>

                        <div class="energy-meter">
                            <h4>Room Energy with High Skepticism</h4>
                            <div class="energy-bar">
                                <div class="energy-fill" style="width: 40%;"></div>
                            </div>
                            <p style="margin-top: 0.5rem; font-size: 0.875rem;">Expect lower energy - that's OK, focus on proof</p>
                        </div>

                        <div class="notes-section">
                            <h4>Skeptic Management Notes</h4>
                            <textarea class="notes-textarea" placeholder="Key objections raised, how addressed, who converted..."></textarea>
                        </div>
                    </div>
                `,
					timer: 0,
				},
				"energy-crash": {
					title: "Adaptive Response: Energy Management",
					content: `
                    <div class="content-section">
                        <h1>Energy Crisis Management</h1>
                        
                        <h2>Reading and Responding to Energy Drops</h2>
                        <p>Energy is the invisible infrastructure of transformation. Manage it actively.</p>

                        <h3>Early Warning Signs</h3>
                        <ul>
                            <li>Side conversations increasing</li>
                            <li>Phone checking epidemic</li>
                            <li>Glazed eyes / blank stares</li>
                            <li>Defensive body language</li>
                            <li>Participation dropping off</li>
                        </ul>

                        <div class="highlight-box">
                            <h4>Emergency Energy Injections</h4>
                            <ul>
                                <li><strong>State Change:</strong> "Everyone stand and stretch!"</li>
                                <li><strong>Pair Share:</strong> "Turn to neighbor, share one insight"</li>
                                <li><strong>Competition:</strong> "First team to solve this wins!"</li>
                                <li><strong>Success Story:</strong> Share a win from another session</li>
                                <li><strong>Break Early:</strong> "Let's take 5 minutes to recharge"</li>
                            </ul>
                        </div>

                        <h3>The Energy Ladder</h3>
                        <p>Progressive interventions based on severity:</p>
                        <ul>
                            <li><strong>Level 1:</strong> Change your own energy/pace</li>
                            <li><strong>Level 2:</strong> Physical movement exercise</li>
                            <li><strong>Level 3:</strong> Competitive element introduction</li>
                            <li><strong>Level 4:</strong> Unexpected demo/surprise</li>
                            <li><strong>Level 5:</strong> Break and reset</li>
                        </ul>

                        <h3>Post-Lunch Protocol</h3>
                        <p>The dreaded post-lunch slump requires special handling:</p>
                        <ul>
                            <li>Start with physical activity</li>
                            <li>Use competition/games</li>
                            <li>Keep segments short (10 min max)</li>
                            <li>Increase interaction frequency</li>
                            <li>Have backup energizer ready</li>
                        </ul>

                        <div class="notes-section">
                            <h4>Energy Management Log</h4>
                            <textarea class="notes-textarea" placeholder="When did energy drop? What worked to restore it?"></textarea>
                        </div>
                    </div>
                `,
					timer: 0,
				},
				expert: {
					title: "Adaptive Response: Unexpected Expertise",
					content: `
                    <div class="content-section">
                        <h1>When Experts Emerge</h1>
                        
                        <h2>Leveraging Unexpected Expertise</h2>
                        <p>Sometimes you discover deep expertise in the room. Use it as rocket fuel.</p>

                        <div class="highlight-box">
                            <h4>The Expert Elevation</h4>
                            <p><em>"We have incredible expertise in this room. [Name], would you share your experience with [topic]? This is exactly the kind of knowledge we need to spread."</em></p>
                        </div>

                        <h3>Expert Integration Strategies</h3>
                        <ul>
                            <li><strong>Co-facilitator:</strong> Bring them up front for specific modules</li>
                            <li><strong>Reality Checker:</strong> "From your experience, what should we watch for?"</li>
                            <li><strong>Success Story:</strong> "Tell us about a time this worked"</li>
                            <li><strong>Pattern Spotter:</strong> "What patterns do you see in our approach?"</li>
                            <li><strong>Coach Role:</strong> Assign them to help struggling teams</li>
                        </ul>

                        <h3>Managing Expert Dynamics</h3>
                        <ul>
                            <li><strong>Prevent takeover:</strong> Time-box their contributions</li>
                            <li><strong>Spread attention:</strong> "Who else has experience with this?"</li>
                            <li><strong>Channel properly:</strong> Direct their energy to help others</li>
                            <li><strong>Acknowledge limits:</strong> "That's one approach, let's explore others"</li>
                        </ul>

                        <h3>The Expert Challenge</h3>
                        <p>Give experts harder problems to keep them engaged:</p>
                        <ul>
                            <li>"How would you scale this 10x?"</li>
                            <li>"What would break this approach?"</li>
                            <li>"How would you teach this to beginners?"</li>
                            <li>"What's the counterargument?"</li>
                        </ul>

                        <div class="notes-section">
                            <h4>Expert Contributions</h4>
                            <textarea class="notes-textarea" placeholder="Who emerged as experts? How did you leverage them?"></textarea>
                        </div>
                    </div>
                `,
					timer: 0,
				},
			};

			// Storage wrapper with error handling
			const storage = {
				get: function (key) {
					try {
						return localStorage.getItem(key);
					} catch (e) {
						console.warn("localStorage not available:", e);
						return null;
					}
				},
				set: function (key, value) {
					try {
						localStorage.setItem(key, value);
						return true;
					} catch (e) {
						console.warn("localStorage not available:", e);
						return false;
					}
				},
			};

			// Global function definitions
			function toggleSidebar() {
				const sidebar = document.getElementById("sidebar");
				const overlay = document.getElementById("mobileOverlay");
				sidebar.classList.toggle("mobile-hidden");

				// Toggle overlay for mobile
				if (window.innerWidth <= 1024) {
					overlay.classList.toggle(
						"active",
						!sidebar.classList.contains("mobile-hidden")
					);
				}
			}

			function openRoomLayout() {
				window.open("room-layout.html", "_blank");
			}

			function closeMobileMenus() {
				const sidebar = document.getElementById("sidebar");
				const overlay = document.getElementById("mobileOverlay");

				sidebar.classList.add("mobile-hidden");
				overlay.classList.remove("active");
			}

			function togglePhase(phase) {
				document
					.querySelectorAll(".phase-header")
					.forEach((h) => h.classList.remove("active"));
				document
					.querySelectorAll(".modules")
					.forEach((m) => m.classList.remove("active"));

				const header = event.currentTarget;
				const modules = document.getElementById(phase);

				header.classList.add("active");
				modules.classList.add("active");

				currentPhase = phase;

				// Close mobile menu after selection
				if (window.innerWidth <= 1024) {
					setTimeout(() => closeMobileMenus(), 300);
				}
			}

			function selectModule(module) {
				document
					.querySelectorAll(".module-item")
					.forEach((item) => item.classList.remove("active"));
				event.currentTarget.classList.add("active");

				currentModule = module;
				loadContent(module);
				updateProgress();

				// Set timer for module
				if (workshopContent[module] && workshopContent[module].timer > 0) {
					resetTimer();
					timer.targetSeconds = workshopContent[module].timer * 60;
					timer.minutes = workshopContent[module].timer;
					timer.seconds = 0;
					updateTimerDisplay();
				}

				// Close mobile menu after selection
				if (window.innerWidth <= 1024) {
					setTimeout(() => closeMobileMenus(), 300);
				}
			}

			function loadContent(module) {
				const content = workshopContent[module];
				if (content) {
					document.getElementById("contentPanel").innerHTML = content.content;
					loadNotes();

					// Re-attach checkbox listeners
					attachCheckboxListeners();
				}
			}

			function loadNotes() {
				const textarea = document.querySelector(".notes-textarea");
				if (textarea) {
					const savedNotes = storage.get(`notes-${currentModule}`);
					if (savedNotes) {
						textarea.value = savedNotes;
					}

					// Add auto-save listener with debouncing
					let saveTimeout;
					textarea.addEventListener("input", function () {
						clearTimeout(saveTimeout);
						saveTimeout = setTimeout(() => {
							storage.set(`notes-${currentModule}`, this.value);
						}, 500);
					});
				}
			}

			function attachCheckboxListeners() {
				document
					.querySelectorAll('.checklist-item input[type="checkbox"]')
					.forEach((checkbox) => {
						// Load saved state
						const saved = storage.get(`check-${checkbox.id}`);
						if (saved === "true") {
							checkbox.checked = true;
						}

						// Save state on change
						checkbox.addEventListener("change", function () {
							storage.set(`check-${this.id}`, this.checked);
						});
					});
			}

			// Timer functions - now counting down
			function startTimer() {
				if (!timer.isRunning) {
					timer.isRunning = true;
					document.getElementById("timerStartBtn").textContent = "Pause";
					timer.interval = setInterval(updateTimer, 1000);
				} else {
					pauseTimer();
				}
			}

			function pauseTimer() {
				timer.isRunning = false;
				document.getElementById("timerStartBtn").textContent = "Resume";
				if (timer.interval) {
					clearInterval(timer.interval);
				}
			}

			function resetTimer() {
				pauseTimer();
				document.getElementById("timerStartBtn").textContent = "Start";
				const moduleTime = workshopContent[currentModule]?.timer || 0;
				timer.targetSeconds = moduleTime * 60;
				timer.minutes = moduleTime;
				timer.seconds = 0;
				timer.totalSeconds = 0;
				updateTimerDisplay();
			}

			function updateTimer() {
				if (timer.countDown && timer.targetSeconds > 0) {
					// Count down mode
					timer.totalSeconds++;
					const remaining = timer.targetSeconds - timer.totalSeconds;
					timer.minutes = Math.floor(remaining / 60);
					timer.seconds = remaining % 60;

					if (remaining <= 0) {
						timer.minutes = 0;
						timer.seconds = 0;
						pauseTimer();
						showAlert("Time's up! Module time complete.", "info");
					} else if (remaining === Math.floor(timer.targetSeconds * 0.25)) {
						showAlert("75% of time used - 25% remaining", "warning");
					} else if (remaining === Math.floor(timer.targetSeconds * 0.5)) {
						showAlert("50% of time remaining", "info");
					} else if (remaining === 60) {
						showAlert("1 minute remaining!", "warning");
					}
				} else {
					// Count up mode (fallback)
					timer.seconds++;
					if (timer.seconds >= 60) {
						timer.minutes++;
						timer.seconds = 0;
					}
				}
				updateTimerDisplay();
			}

			function updateTimerDisplay() {
				const display = document.getElementById("timerDisplay");
				const mins = String(Math.abs(timer.minutes)).padStart(2, "0");
				const secs = String(Math.abs(timer.seconds)).padStart(2, "0");
				display.textContent = `${mins}:${secs}`;

				// Color coding based on time remaining
				if (timer.countDown && timer.targetSeconds > 0) {
					const remaining = timer.targetSeconds - timer.totalSeconds;
					const percentage = remaining / timer.targetSeconds;

					if (percentage <= 0.1) {
						display.style.background = "rgba(239, 68, 68, 0.3)";
					} else if (percentage <= 0.25) {
						display.style.background = "rgba(245, 158, 11, 0.3)";
					} else {
						display.style.background = "rgba(59, 130, 246, 0.2)";
					}
				}
			}

			function showAlert(message, type = "info") {
				const alertsContainer = document.getElementById("adaptiveAlerts");
				const alert = document.createElement("div");
				alert.className = `alert ${type}`;

				const icon =
					type === "warning"
						? "⚠️"
						: type === "info"
						? "ℹ️"
						: type === "success"
						? "✅"
						: "🚨";

				alert.innerHTML = `
                <strong>${icon} Alert:</strong> ${message}
                <button style="float: right; background: none; border: none; color: white; cursor: pointer; font-size: 1.2rem;" onclick="this.parentElement.remove()">×</button>
            `;
				alertsContainer.appendChild(alert);

				// Auto-remove after 5 seconds
				setTimeout(() => {
					if (alert.parentElement) {
						alert.remove();
					}
				}, 5000);
			}

			function showEnergyAlert() {
				const alerts = [
					"Energy check: How is the room feeling?",
					"Watch for: side conversations, phone checking, glazed eyes",
					"Interventions: state change, competition injection, success celebration",
					"Remember: your energy sets the ceiling",
					"Quick wins create momentum - celebrate small victories",
					"If energy is low, try physical movement or pair sharing",
				];
				showAlert(alerts[Math.floor(Math.random() * alerts.length)], "info");
			}

			function updateProgress() {
				const modules = Object.keys(workshopContent);
				const currentIndex = modules.indexOf(currentModule);
				const progress = ((currentIndex + 1) / modules.length) * 100;
				document.getElementById("progressFill").style.width = `${progress}%`;
			}

			// Initialize when page loads
			document.addEventListener("DOMContentLoaded", function () {
				loadContent(currentModule);
				updateProgress();
				attachCheckboxListeners();

				// Set initial timer
				const moduleTime = workshopContent[currentModule]?.timer || 0;
				if (moduleTime > 0) {
					timer.targetSeconds = moduleTime * 60;
					timer.minutes = moduleTime;
					timer.seconds = 0;
					updateTimerDisplay();
				}

				// Add keyboard shortcuts
				document.addEventListener("keydown", function (e) {
					if (e.key === "Escape") {
						closeMobileMenus();
					}
					if (e.ctrlKey || e.metaKey) {
						if (e.key === "s") {
							e.preventDefault();
							showAlert("Content auto-saves as you type!", "success");
						}
					}
				});
			});

			// Handle window resize
			window.addEventListener("resize", function () {
				if (window.innerWidth > 1024) {
					document.getElementById("mobileOverlay").classList.remove("active");
				}
			});
		</script>
	</body>
</html>
